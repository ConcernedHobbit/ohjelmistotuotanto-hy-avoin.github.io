<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Viikko 6</title>
  <meta name="description" content="">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://localhost:4000/tehtavat6/">
  <link rel="alternate" type="application/rss+xml" title="Ohjelmistotuotanto avoin yliopisto 2021" href="/feed.xml">

  
</head>


  <body>
    
    <header class="site-header" role="banner">

  <div class="wrapper">
    
    
    <a class="site-title" href="/">Ohjelmistotuotanto avoin yliopisto 2021</a>
    
    
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
            <a class="page-link" href="/osa0/">Osa 0</a>
            
          
            
            
            <a class="page-link" href="/osa1/">Osa 1</a>
            
          
            
            
            <a class="page-link" href="/osa2/">Osa 2</a>
            
          
            
            
            <a class="page-link" href="/osa3/">Osa 3</a>
            
          
            
            
            <a class="page-link" href="/osa4/">Osa 4</a>
            
          
            
            
          
            
            
            <a class="page-link" href="/osa5/">Osa 5</a>
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
            <a class="page-link" href="/tehtavat/">Tehtävät</a>
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
          
        </div>
      </nav>
    

    
  </div>
</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title"></h1>
  </header>

  <div class="post-content">
    <h2 id="viikko-6">Viikko 6</h2>

<p><em>Alla olevien tehtävien deadline on maanantaina 7.12. klo 23:59</em></p>

<p>Apua tehtävien tekoon kurssin <a href="https://telegram.me/ohjelmistotuotanto">Telegram</a>-kanavalla sekä zoom-pajassa:</p>

<ul>
  <li>Maanantai 14-16 <a href="https://helsinki.zoom.us/j/63962392550?pwd=RzluTjZWYmNLb0g4bjRxb0ZlckRkUT09">zoom</a></li>
  <li>Perjantai 10-12 <a href="https://helsinki.zoom.us/j/64396759243">zoom</a></li>
</ul>

<p>Tehtävät 2-5 liittyvät materiaalin ohjelmistosuunnittelua käsittelevän <a href="/osa4/">osan 4</a> niihin lukuihin, joihin on merkitty <span style="color:blue">[viikko 5]</span> tai <span style="color:blue">[viikko 6]</span>.</p>

<p>Tämän viikon <a href="https://study.cs.helsinki.fi/stats/courses/ohtu2020/quiz/6">monivalintatehtävät</a>, deadline on poikkeuksellisesti vasta perjantaina 13.12. klo 23:59:00.</p>

<h3 id="typoja-tai-epäselvyyksiä-tehtävissä">Typoja tai epäselvyyksiä tehtävissä?</h3>

<p>Tee <a href="/osa0#typoja-materiaalissa">korjausehdotus</a> editoimalla <a href="https://github.com/ohjelmistotuotanto-hy-avoin/ohjelmistotuotanto-hy-avoin.github.io/blob/master/tehtavat6.md">tätä</a> tiedostoa GitHubissa.</p>

<h3 id="tehtävien-palauttaminen">Tehtävien palauttaminen</h3>

<p>Tehtävät palautetaan GitHubiin, sekä merkitsemällä tehdyt tehtävät palautussovellukseen <a href="https://study.cs.helsinki.fi/stats/courses/ohtu2020">https://study.cs.helsinki.fi/stats/courses/ohtu2020</a></p>

<p>Katso tarkempi ohje palautusrepositorioita koskien <a href="/tehtavat1#teht%C3%A4vien-palautusrepositoriot">täältä</a>.</p>

<h3 id="1-git-rebase-versionhallinta">1. git: rebase [versionhallinta]</h3>

<p><em>Tätä tehtävää ei palauteta mihinkään!</em></p>

<p>Lue <a href="http://git-scm.com/book/en/Git-Branching-Rebasing">http://git-scm.com/book/en/Git-Branching-Rebasing</a> ja <a href="https://www.atlassian.com/git/tutorials/rewriting-history#git-rebase">https://www.atlassian.com/git/tutorials/rewriting-history#git-rebase</a></p>

<p>Aikaansaa seuraavankaltainen tilanne</p>

<pre>
------- master
\
 \--- haara
</pre>

<p>“rebeissaa” haara masteriin, eli aikaansaa seuraava tilanne:</p>

<pre>
------- master
       \
        \--- haara
</pre>

<p>Varmista komennolla <code>gitk --all</code> että tilanne on haluttu.</p>

<p>“mergeä” master vielä haaraan:</p>

<pre>
-------
       \     master
        \--- haara
</pre>

<p>Lopputuloksena pitäisi siis olla lineaarinen historia ja master sekä haara samassa. Varmista jälleen komennolla <code>gitk --all</code> että kaikki on kunnossa.</p>

<p>Poista branch haara. Etsi googlaamalla komento jolla saat tuhottua branchin.</p>

<h3 id="2-kyselykieli-nhlstatistics-ohjelmaan-osa-1">2. Kyselykieli NHLStatistics-ohjelmaan, osa 1</h3>

<p><a href="https://github.com/ohjelmistotuotanto-hy/syksy2020">Kurssirepositorion</a> hakemistosta <em>koodi/viikko6/QueryLanguage</em> löytyy jälleen yksi versio tutusta NHL-tilastojen tarkasteluun tarkoitetusta  ohjelmasta.</p>

<p>Tällä kertaa olemme kiinnostuneita tekemään hieman monimutkaisempia “kyselyjä” pelaajatietoihin, esim. <em>listaa kaikki joukkueen PHI pelaajat joilla on vähintään 5 maalia ja vähintään 5 syöttöä</em>.</p>

<p>Koodin onkin luotu hieman valmista kalustoa josta pääset liikkeelle. Yllä olevan kyselyn voi suorittaa seuraavasti:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Statistics</span> <span class="n">stats</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Statistics</span><span class="o">(</span><span class="k">new</span> <span class="n">PlayerReaderImpl</span><span class="o">(</span><span class="s">"https://nhlstatisticsforohtu.herokuapp.com/players.txt"</span><span class="o">));</span>
 
    <span class="n">Matcher</span> <span class="n">m</span> <span class="o">=</span> <span class="k">new</span> <span class="n">And</span><span class="o">(</span> <span class="k">new</span> <span class="n">HasAtLeast</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="s">"goals"</span><span class="o">),</span>
                         <span class="k">new</span> <span class="nf">HasAtLeast</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="s">"assists"</span><span class="o">),</span>
                         <span class="k">new</span> <span class="nf">PlaysIn</span><span class="o">(</span><span class="s">"PHI"</span><span class="o">)</span>
    <span class="o">);</span>
 
    <span class="k">for</span> <span class="o">(</span><span class="n">Player</span> <span class="n">player</span> <span class="o">:</span> <span class="n">stats</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">m</span><span class="o">))</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">player</span> <span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Luokalle <em>Statistics</em> on tehty metodi <em>matches</em>, joka palauttaa listan niistä pelaajista, joille parametrina annettu <em>Matcher</em>-rajapinnan toteuttava olio palauttaa <em>true</em></p>

<p>Tutustu ohjelman rakenteeseen</p>

<ul>
  <li>huomioi miten <em>HasAtLeast</em> käyttää Javan ns. reflektio-ominaisuutta kutsuessaan merkkijonoparametria vastaavaa metodia</li>
  <li>toinen huomioinarvoinen piirre on <em>And</em>-luokan konstruktorissa käytetty vaihtuvamittainen parametrilista, eli “vararg”, ks. lisää esim: <a href="https://www.javatpoint.com/varargs">https://www.javatpoint.com/varargs</a></li>
</ul>

<p><strong>Tee rajapinnan <em>Matcher</em> toteuttavat luokat, joiden avulla voit tehdä operaatiot</strong></p>

<ul>
  <li>All (tosi kaikille pelaajille)</li>
  <li>Not (parameetrina olevan ehdon negaatio)</li>
  <li>HasFewerThan (HasAtLeast-komennon negaatio eli, esim. on vähemmän kuin 10 maalia)</li>
</ul>

<p>Kaikille pelaajille tosi ehto <em>all</em> ei ole vielä tämän tehtävän kannalta kovin mielenkiintoinen, sitä pystyy kuitenkin hyödyntämään neljännessä tehtävässä.</p>

<p>Voit tarkistaa toteutuksesi toimivuuden tekemällä kyselyn</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Matcher</span> <span class="n">m</span> <span class="o">=</span> <span class="k">new</span> <span class="n">And</span><span class="o">(</span> 
    <span class="k">new</span> <span class="nf">Not</span><span class="o">(</span> <span class="k">new</span> <span class="n">HasAtLeast</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="s">"goals"</span><span class="o">)</span> <span class="o">),</span> 
    <span class="k">new</span> <span class="nf">PlaysIn</span><span class="o">(</span><span class="s">"NYR"</span><span class="o">)</span>
<span class="o">);</span>
</code></pre></div></div>

<p>vastauksena pitäisi olla joukkueen <em>NYR</em> pelaajista ne, joilla ei ole vähintään yht maalia, eli <em>0 maalia tehneet</em>:</p>

<pre>
Steven Fogarty       NYR           0 +  0 = 0
Boo Nieves           NYR           0 +  0 = 0
Libor Hajek          NYR           0 +  5 = 5
Tim Gettinger        NYR           0 +  1 = 1
Lias Andersson       NYR           0 +  1 = 1
Henrik Lundqvist     NYR           0 +  0 = 0
Igor Shesterkin      NYR           0 +  0 = 0
Alexandar Georgiev   NYR           0 +  0 = 0
</pre>

<p>Kyselyn</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Matcher</span> <span class="n">m</span> <span class="o">=</span> <span class="k">new</span> <span class="n">And</span><span class="o">(</span> 
    <span class="k">new</span> <span class="nf">HasFewerThan</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="s">"goals"</span><span class="o">),</span> 
    <span class="k">new</span> <span class="nf">PlaysIn</span><span class="o">(</span><span class="s">"NYR"</span><span class="o">)</span>
<span class="o">);</span>
</code></pre></div></div>

<p>tulisi palauttaa täsmälleen sama lista.</p>

<p>Ehdon <code class="highlighter-rouge">All</code> tulisi siis olla tosi kaikille pelaajille., Voit varmistaa sen toimivuudet kokeilemalla seuraavaa:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">stats</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="k">new</span> <span class="n">All</span><span class="o">()).</span><span class="na">size</span><span class="o">());</span>
</code></pre></div></div>

<p>Komennon tulisi tulostaa kaikkien pelaajien lukumäärä, joka on_964_.</p>

<p>Ehto <code class="highlighter-rouge">All</code> ei ole yksistään kovin hyödyllinen, mutta tulemme tarvitseman sitä pian.</p>

<h3 id="3-kyselykieli-nhlstatistics-ohjelmaan-osa-2">3. Kyselykieli NHLStatistics-ohjelmaan, osa 2</h3>

<p><strong>Tee</strong> rajapinnan <em>Matcher</em> toteuttava <em>Or</em>, joka on tosi silloin jos ainakin yksi sen parametrina saamista ehdoista on tosi.</p>

<p>Kyselyn</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Matcher</span> <span class="n">m</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Or</span><span class="o">(</span> <span class="k">new</span> <span class="n">HasAtLeast</span><span class="o">(</span><span class="mi">40</span><span class="o">,</span> <span class="s">"goals"</span><span class="o">),</span>
                    <span class="k">new</span> <span class="nf">HasAtLeast</span><span class="o">(</span><span class="mi">60</span><span class="o">,</span> <span class="s">"assists"</span><span class="o">)</span>
<span class="o">);</span>  
</code></pre></div></div>

<p>tulee palauttaa ne, joilla on vähintään 20 maalia tai syöttöä, eli seuraava lista</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Mika Zibanejad       NYR          41 + 34 = 75
Artemi Panarin       NYR          32 + 63 = 95
David Pastrnak       BOS          48 + 47 = 95
Auston Matthews      TOR          47 + 33 = 80
Alex Ovechkin        WSH          48 + 19 = 67
John Carlson         WSH          15 + 60 = 75
Leon Draisaitl       EDM          43 + 67 = 110
Connor McDavid       EDM          34 + 63 = 97
</code></pre></div></div>

<p>Kyselyn</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Matcher</span> <span class="n">m</span> <span class="o">=</span> <span class="k">new</span> <span class="n">And</span><span class="o">(</span>
    <span class="k">new</span> <span class="nf">HasAtLeast</span><span class="o">(</span><span class="mi">50</span><span class="o">,</span> <span class="s">"points"</span><span class="o">),</span>
    <span class="k">new</span> <span class="nf">Or</span><span class="o">(</span> 
        <span class="k">new</span> <span class="nf">PlaysIn</span><span class="o">(</span><span class="s">"NYR"</span><span class="o">),</span>
        <span class="k">new</span> <span class="nf">PlaysIn</span><span class="o">(</span><span class="s">"NYI"</span><span class="o">),</span>
        <span class="k">new</span> <span class="nf">PlaysIn</span><span class="o">(</span><span class="s">"BOS"</span><span class="o">)</span>
    <span class="o">)</span>
<span class="o">);</span> 
</code></pre></div></div>

<p>tulee palauttaa kaikki yli 20 pistettä tehneet jotka pelaavat jossain seuraavista joukkueista <em>NYI</em>, <em>NYR</em> tai <em>NJD</em>. Lista näyttää seuraavalta:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Brock Nelson         NYI          26 + 28 = 54
Mathew Barzal        NYI          19 + 41 = 60
Ryan Strome          NYR          18 + 41 = 59
Mika Zibanejad       NYR          41 + 34 = 75
Tony DeAngelo        NYR          15 + 38 = 53
Artemi Panarin       NYR          32 + 63 = 95
Patrice Bergeron     BOS          31 + 25 = 56
Brad Marchand        BOS          28 + 59 = 87
David Pastrnak       BOS          48 + 47 = 95
</code></pre></div></div>

<p>Kyselyt perustuvat rakenteeltaan <em>decorator</em>-suunnittelumalliin, vastaavasti kuten materiaalin osan 4 esimerkissä <a href="/osa4/#esimerkki-dekoroitu-pino-viikko-6">dekoroitu pino</a>. <em>And</em>- ja <em>OR</em>-muotoiset kyseltyt on muodostettu myös erään suunnittelumallin, <a href="https://sourcemaking.com/design_patterns/composite">compositen</a> hengessä, ne ovat <em>Matcher</em>-rajapinnan toteuttavia olioita, jotka sisältävät itse monta <em>Matcher</em>-olioa. Niiden käyttäjä ei kuitenkaan tiedä sisäisestä rakenteesta mitään.</p>

<h3 id="4-parannettu-kyselykieli-osa-1">4. Parannettu kyselykieli, osa 1</h3>

<p>Matcher-olioiden avulla tehtyä kyselykieltä vaivaa se, että kyselyjen rakentaminen on ikävää, sillä jokaista kyselyn osaa kohti on luotava new-komennolla uusi olio.</p>

<p>Tee materiaalin osassa 4 esitellyn <a href="/osa4#pinorakentaja-viikko-6">pinorakentajan</a> hengessä <em>kyselyrakentaja</em>, jonka avulla voit luoda Matcher-olioita.</p>

<p>Rakentaja voi toimia esim. seuraavaan tapaan.</p>

<p>Ensin kysely, joka palauttaa jokaisen pelaajan:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Statistics</span> <span class="n">stats</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Statistics</span><span class="o">(</span><span class="k">new</span> <span class="n">PlayerReaderImpl</span><span class="o">(</span><span class="s">"https://nhlstatisticsforohtu.herokuapp.com/players.txt"</span><span class="o">));</span>
    
    <span class="n">QueryBuilder</span> <span class="n">query</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QueryBuilder</span><span class="o">();</span>
    <span class="n">Matcher</span> <span class="n">m</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="na">build</span><span class="o">();</span>

    <span class="k">for</span> <span class="o">(</span><span class="n">Player</span> <span class="n">player</span> <span class="o">:</span> <span class="n">stats</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">m</span><span class="o">))</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">player</span> <span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Tässä kyselyssä voi ja kannattaa hyödyntää aiemmin tehtyä <em>All</em>-matcheria.</p>

<p>Seuraavaksi kysely, missä tulostetaan pelaajat, joiden joukkue on NYR</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Statistics</span> <span class="n">stats</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Statistics</span><span class="o">(</span><span class="k">new</span> <span class="n">PlayerReaderImpl</span><span class="o">(</span><span class="s">"https://nhlstatisticsforohtu.herokuapp.com/players.txt"</span><span class="o">));</span>
 
    <span class="n">QueryBuilder</span> <span class="n">query</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QueryBuilder</span><span class="o">();</span>
 
    <span class="n">Matcher</span> <span class="n">m</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="na">playsIn</span><span class="o">(</span><span class="s">"NYR"</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
 
    <span class="k">for</span> <span class="o">(</span><span class="n">Player</span> <span class="n">player</span> <span class="o">:</span> <span class="n">stats</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">m</span><span class="o">))</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">player</span> <span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Seuraavaksi kysely, missä tulostetaan pelaajat joiden joukkue on NYR, joilla on vähintään 5 ja vähemmän kuin 10 maalia:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Statistics</span> <span class="n">stats</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Statistics</span><span class="o">(</span><span class="k">new</span> <span class="n">PlayerReaderImpl</span><span class="o">(</span><span class="s">"https://nhlstatisticsforohtu.herokuapp.com/players.txt"</span><span class="o">));</span>
 
    <span class="n">QueryBuilder</span> <span class="n">query</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QueryBuilder</span><span class="o">();</span>
 
    <span class="n">Matcher</span> <span class="n">m</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="na">playsIn</span><span class="o">(</span><span class="s">"NYR"</span><span class="o">)</span>
                     <span class="o">.</span><span class="na">hasAtLeast</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="s">"goals"</span><span class="o">)</span>
                     <span class="o">.</span><span class="na">hasFewerThan</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="s">"goals"</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
 
    <span class="k">for</span> <span class="o">(</span><span class="n">Player</span> <span class="n">player</span> <span class="o">:</span> <span class="n">stats</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">m</span><span class="o">))</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">player</span> <span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Pelaajien lista on seuraava</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Greg McKegg          NYR           5 +  4 = 9
Jacob Trouba         NYR           7 + 20 = 27
Brendan Lemieux      NYR           6 + 12 = 18
Adam Fox             NYR           8 + 34 = 42
Brett Howden         NYR           9 + 10 = 19
</code></pre></div></div>

<p>Peräkkäin ketjutetut ehdot siis toimivat “and”-periaatteella.</p>

<p>Tässä tehtävässä riittää, että kyselyrakentaja osaa muodostaa <em>and</em>-periaatteella yhdistettyjä ehtoja.</p>

<h3 id="5-parannettu-kyselykieli-osa-2">5. Parannettu kyselykieli, osa 2</h3>

<p>Laajennetaan kyselyrakentajaa siten, että sen avulla voi muodostaa myös <em>or</em>-ehdolla muodostettuja kyselyjä. Or-ehdon sisältävä kysely voi olla muodostettu esim. seuraavasti:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">QueryBuilder</span> <span class="n">query</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QueryBuilder</span><span class="o">();</span>
<span class="n">Matcher</span> <span class="n">m1</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="na">playsIn</span><span class="o">(</span><span class="s">"PHI"</span><span class="o">)</span>
          <span class="o">.</span><span class="na">hasAtLeast</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="s">"assists"</span><span class="o">)</span>
          <span class="o">.</span><span class="na">hasFewerThan</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="s">"goals"</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>

<span class="n">Matcher</span> <span class="n">m2</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="na">playsIn</span><span class="o">(</span><span class="s">"EDM"</span><span class="o">)</span>
          <span class="o">.</span><span class="na">hasAtLeast</span><span class="o">(</span><span class="mi">40</span><span class="o">,</span> <span class="s">"points"</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>

<span class="n">Matcher</span> <span class="n">m</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="na">oneOf</span><span class="o">(</span><span class="n">m1</span><span class="o">,</span> <span class="n">m2</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
</code></pre></div></div>

<p>Pelaajalistan tulisi olla:</p>

<pre>
Justin Braun         PHI           3 + 16 = 19
Robert Hagg          PHI           3 + 10 = 13
Philippe Myers       PHI           4 + 12 = 16
Ryan Nugent-Hopkins  EDM          22 + 39 = 61
Leon Draisaitl       EDM          43 + 67 = 110
Connor McDavid       EDM          34 + 63 = 97
</pre>

<p>Tai sama ilman apumuuttujia:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Matcher</span> <span class="n">m</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="na">oneOf</span><span class="o">(</span>
    <span class="n">query</span><span class="o">.</span><span class="na">playsIn</span><span class="o">(</span><span class="s">"PHI"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">hasAtLeast</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="s">"assists"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">hasFewerThan</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="s">"goals"</span><span class="o">).</span><span class="na">build</span><span class="o">(),</span>

    <span class="n">query</span><span class="o">.</span><span class="na">playsIn</span><span class="o">(</span><span class="s">"EDM"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">hasAtLeast</span><span class="o">(</span><span class="mi">40</span><span class="o">,</span> <span class="s">"points"</span><span class="o">).</span><span class="na">build</span><span class="o">()</span>
<span class="o">).</span><span class="na">build</span><span class="o">();</span>
</code></pre></div></div>

<h3 id="6-pull-request-ja-refaktorointia-tätä-tehtävää-ei-lasketa-versionhallintatehtäväksi">6. Pull request ja refaktorointia (tätä tehtävää ei lasketa versionhallintatehtäväksi)</h3>

<p>Isoa projektia on vaikea ylläpitää yksin ja vielä vaikeampaa on löytää oikeat ratkaisut jokaiseen ongelmaan, kun ohjelmisto kasvaa. On vaikeaa hallita itse kaikkea ja jotkin osa-alueet eivät välttämättä edes miellytä ja niihin on siksi vaikea paneutua. Saatat löytää itsesi ajattelemasta vaikkapa: “Lukisipa joku tietorakenteiden asiantuntija tämän osuuden läpi ja tsekkaisi, että HashSet on nyt varmasti se tehokkain ratkaisu…”.</p>

<p>Ehkäpä et edes ajatellut asiaa, mutta joku silti näyttää, että binäärihakupuu onkin tilanteessa tehokkaampi ratkaisu, koodaa korjaukset puolestasi lähdekoodiin sekä tekee muutoksista <em>pull requestin</em>. Onneksi julkaisit projektisi Open Sourcena!</p>

<p>GitHub on täynnä Open Source -projekteja, jotka kaipaavat panostasi. Mikäs sen kivempaa, kuin käyttää muutama tunti suosikkirepositioriosi lähdekoodin parissa ja korvata sieltä huomaamasi epäelegantti ratkaisu paremmalla. Useilla repositorioilla on valmiit ohjeet muutosehdotusten  tekemiseen repositorion juuresta löytyvässä tiedostossa Contributing.md. Tässä esimerkiksi bluebird.js:än <a href="https://github.com/petkaantonov/bluebird/blob/master/CONTRIBUTING.md">CONTRIBUTING.md</a>.</p>

<p>Tehtävänäsi on harjoitella muutosehdotuksen tekemistä “open source -projektiin” sekä vieraan koodin lukemista ja refaktorointia.</p>

<ul>
  <li>Valitse yksi repositorio <a href="https://study.cs.helsinki.fi/stats/api/courses/ohtu2020/projects/repositories">miniprojektien</a> joukosta
    <ul>
      <li>mielellään sellaisen ryhmän repositorio, jolla ei ole jo viittä pull requestia.</li>
      <li>ja luonnollisesti sellainen, jonka koodiin haluat tehdä jotain muutoksia</li>
    </ul>
  </li>
  <li><a href="https://help.github.com/en/github/getting-started-with-github/fork-a-repo">Forkkaa</a> repositorio</li>
  <li>Tee forkattuun repositorioon uusi branch nimellä “muutoksia”</li>
  <li>Tee luomaasi branchiin “tyhjä” <a href="https://help.github.com/en/github/collaborating-with-issues-and-pull-requests/creating-a-pull-request">pull request</a>: lisää esimerkiksi yksi tyhjä rivi README.md:hen, pushaa uusi branch GitHubiin ja tee branchista pull request.
    <ul>
      <li>Tyhjän pullrequestin tarkoituksena on varata sinulle paikka kyseisen repositorion muutoksentekijöiden joukosta. Haluamme, että kaikki ryhmät saavat suunilleen tasaisesti pull requesteja, eli jos repositoriossa on niitä jo runsaasti, etsi mielellään jokin muu repositorio.</li>
    </ul>
  </li>
  <li>Etsi ryhmän lähdekoodista jotain refaktoroitavaa
    <ul>
      <li>kyseessä ei tarvitse olla iso muutos, esimerkiksi muuttujan/metodin uudelleennimeäminenkin riittää</li>
    </ul>
  </li>
  <li>Refaktoroi ja committaa</li>
  <li>Käy katsomassa tekemääsi tyhjää pullrequestia. Mitä tapahtui?</li>
  <li>Rebeissaa (ks. tämän viikon ensimmäinen tehtävä) luomasi branch paikalliseen master branchin päälle. Pushaa. Tapahtuiko pull requestissa muutoksia?</li>
  <li>Otsikoi tekemäsi pullrequest niin, että se kuvaa tekemiäsi muutoksia. Tarkenna otsikon alle mitä teit ja miksi.</li>
  <li>Jos ryhmä pyytää sinua tekemään muutoksia pull requestiisi, tee halutessasi tarvittavat muutokset ja committaa. Päivittyikö pullrequest?</li>
  <li>Kun ryhmä on hyväksynyt muutoksesi, voit poistaa luomasi branchin</li>
</ul>

<p>Laita palautusrepositorioosi tiedosto PULL.md ja sen sisällöksi linkki pull requestiin.</p>

<h3 id="tehtävien-palautus">Tehtävien palautus</h3>

<p>Pushaa kaikki tekemäsi tehtävät (paitsi ne, joissa mainitaan, että tehtävää ei palauteta mihinkään) GitHubiin ja merkkaa tekemäsi tehtävät palautussovellukseen <a href="https://study.cs.helsinki.fi/stats/courses/ohtu2020">https://study.cs.helsinki.fi/stats/courses/ohtu2020</a></p>


  </div>

</article>
      </div>
    </main>

     <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading"></h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>
             Ohjelmistotuotanto avoin yliopisto 2021 
          </li>
          <li>
            <a href="mailto:matti.luukkainen@helsinki.fi">matti.luukkainen@helsinki.fi</a>
          </li>
          <li>
            <a href="https://github.com/mluukkai"><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">mluukkai</span></a>

          </li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
           
        </ul>
      </div>

      <div class="footer-col footer-col-3">
          <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">
            <img alt="Creative Commons -lisenssi" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png"
            />
          </a>
          <br/> Materiaali on lisensoitu
          <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons BY-NC-SA 3.0 -lisenssillä</a>.
      </div>
    </div>

  </div>

</footer>
  
  </body>

</html>
